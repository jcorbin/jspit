{
  "version": 3,
  "sources": ["/Users/jcorbin/borkshop-js/packages/jspit/src/anim.ts"],
  "sourcesContent": ["export function nextFrame() {\n  return new Promise<number>(resolve => requestAnimationFrame(resolve));\n}\n\nexport async function everyFrame(update:(dt:number)=>boolean) {\n  let last = await nextFrame();\n  let dt = 0;\n  while (update(dt)) {\n    const next = await nextFrame();\n    dt = next - last, last = next;\n  }\n}\n\nexport function schedule(...parts:(\n  | {every:number, then:(n:number)=>boolean}\n  | ((dt:number)=>boolean)\n)[]) {\n  const every = parts.map(part => typeof part === 'function' ? 0    : part.every);\n  const then  = parts.map(part => typeof part === 'function' ? part : part.then);\n  const last  = every.map(()   => 0);\n  return (dt:number):boolean => {\n    for (let i = 0; i < every.length; ++i) {\n      let n = dt;\n      if (every[i] > 0) {\n        last[i] += dt / every[i];\n        if (n = Math.floor(last[i])) last[i] -= n;\n      }\n      if (n && !then[i](n)) return false;\n    }\n    return true;\n  }\n}\n"],
  "mappings": "AAAO;AACL,SAAO,IAAI,QAAgB,aAAW,sBAAsB;AAAA;AAG9D,iCAAiC;AAC/B,MAAI,OAAO,MAAM;AACjB,MAAI,KAAK;AACT,SAAO,OAAO;AACZ,UAAM,OAAO,MAAM;AACnB,SAAK,OAAO,MAAM,OAAO;AAAA;AAAA;AAItB,4BAAqB;AAI1B,QAAM,QAAQ,MAAM,IAAI,UAAQ,OAAO,SAAS,aAAa,IAAO,KAAK;AACzE,QAAM,OAAQ,MAAM,IAAI,UAAQ,OAAO,SAAS,aAAa,OAAO,KAAK;AACzE,QAAM,OAAQ,MAAM,IAAI,MAAQ;AAChC,SAAO,CAAC;AACN,aAAS,IAAI,GAAG,IAAI,MAAM,QAAQ,EAAE;AAClC,UAAI,IAAI;AACR,UAAI,MAAM,KAAK;AACb,aAAK,MAAM,KAAK,MAAM;AACtB,YAAI,IAAI,KAAK,MAAM,KAAK;AAAK,eAAK,MAAM;AAAA;AAE1C,UAAI,KAAK,CAAC,KAAK,GAAG;AAAI,eAAO;AAAA;AAE/B,WAAO;AAAA;AAAA;",
  "names": []
}
